
## 闭包

1. 作用域链
2. GC 机制
3. 闭包的实现机制
4. 模块化编程
5. jquery 源码结构解释（部分）


    闭包：闭包是一个概念，简单的讲就是指有权访问另外一个函数作用域中的变量的函数。创建闭包的常用方式就是在一个函数内部创建另外一个函数。

##### 为什么要有闭包？

    在JavaScript中，我们经常需要定义很多的变量，有些变量是在全局空间中，供所有的函数访问。有些变量定义在函数内部，正常情况下，只能在函数内部被访问到。闭包的好处，就是可以在函数外部访问到函数内部定义的变量或方法。

##### 闭包的应用场景

1. 采用函数引用方式的 setTimeout 调用

2. 将函数关联到对象的实例方法

3. 封装相关的功能集


下面，我们从作用域链开始入手，慢慢剖析闭包的实现过程。

#### 作用域链

    作用域链，是指每个函数内部都有一个它本身可以访问的一个作用域的链。而作用域是每个函数内部定义变量或函数的空间。

先从一个例子开始：

    var scope = "global";
    function test(){
      console.log(scope);
      var scope = "local";
      console.log(scope);
    }
    test();

第一句输出："underfied"，
第二句输出："local"

分析：要明白这个结果，需要知道一个JavaScript 函数作用域的一个特性。局部变量在整个函数体始终是有定义的，因为变量声明的语句被提前到了函数体顶部，而变量初始化还在原来的位置。所以，上面的代码可以写成：

    var scope = "global";
    function test(){
      var scope;
      console.log(scope);
      scope = "local";
      console.log(scope);
    }
    test();


每个函数作用域链的结构，包括当前函数内部作用域和其外部作用域，然后想外继续扩展，知道全局作用域。

#### 闭包的实现

##### 1. 闭包的最简单实现

    function A() {
      var a = "Hello World!";
      function B() {
        console.log(a);
      }
      return B;
    }
    var b = A();
    b();  //Hello World
