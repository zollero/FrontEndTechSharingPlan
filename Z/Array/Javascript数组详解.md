
### Javascript 数组概述

数组是值的有序集合。每个值叫做一个元素，而每个元素在数组中有一个位置，以数字表示，称为索引。

Javascript数组是Javascript对象的特殊形式，数组索引实际上和碰巧是整数的属性名差不多。通常，数组的实现是经过优化的，用数字索引来访问数组元素一般来说比访问常规的对象属性要快很多。

数组继承自 Array.prototype 中的属性。

### 数组的创建

#### 1. 直接量创建

最简单的创建数组的方法是使用数组直接量。在方括号中将数组元素用逗号隔开即可。如：

		var empty = [];
		var primes = [2, 3, 4, 5, 10];
		var misc = [1.1, true, "a", ];		//3个不同类型的元素和结尾的逗号
			//猜猜 misc.length 的值是多少？？？


数组直接量中的值不一定要是常量，它们可以是`任意的表达式`，也可以是对象直接量或者数组直接量：

		var base = 1024;
		var table = [base, base + 1, base + 5];		//再修改base的值时，不会改变table中元素的值

		var b = [[1, {x:1, y:2}], [2, {x:3, y: 4}]];

如果省略数组直接量中的某个值，省略的元素将被赋予 underfined 值：

		var count = [1, , 3];		//数组有3个元素，中间的那个元素值为 underfined
		var undefs = [, ,];			//数组有2个元素，都是underfined

#### 2. 构造函数创建

* 调用时没有参数

		var a = new Array();		//该方法创建一个任何元素的空数组，等同于数组直接量[]

* 调用是由一个数值参数，它指定长度

		var a = new Array(10);	//该参数表示新数组的长度

* 显式指定两个或多个数组元素或者数组的一个非数值元素

		var a = new Array(4, 2, 1, "testing, testing");	//构造函数的参数将会成为新数组的元素



### 数组的读写

数组的读取与对象的中括号读写属性很相似，理论都比较简单，这里不再赘述。

#####注意：
JS数组没有“越界”错误的概念，当试图查询任何对象中不存在的属性时，不会报错，只会得到 underfined 值。但是，如果再访问该underfined的属性，则会报错。


### 数组元素的添加和删除

添加数组元素最简单的方法：为新索引赋值。

		var a = [];
		a[0] = "zero";
		a[1] = "one";


push() 方法：在数组末尾添加一个或多个元素。

		a = [];
		a.push("zero");			//a = ["zero"]
		a.push("one", "two");	//a = ["zero", "one", "two"]

可以像删除对象属性一样使用delete运算符来删除数组元素：

		a = [1, 2, 3];
		delete a[1];	//删除索引为1的元素，a 变成了稀疏数组

### 数组遍历

##### 1. for 循环

		var a = [1, 2, 3, 4];
		for (var i=0; i < a.length; i++) {
			console.log(a[i]);
		}

##### 2. for/in

		for (var i in a) {
			console.log(a[i]);		// i 位数组a的索引值
		}

##### 3. forEach (IE不支持)

		var data = [1, 2, 3, 4];
		var sumOfSquares = 0;
		data.forEach(function(x) {		//x为每个元素的值
			sumOfSquares += x*x;
		})

### 数组方法

ECMAScript 3在 Array.prototype中定义了一些很有用的操作数组的函数，这意味着这些函数作为任何数组的方法都是可用的。ECMAScript 5中也新增了一些新的数组遍历方法。

##### 1. join()

Array.join() 方法将数组中所有元素都转化为字符串并连接在一起，返回最后生成的字符串。该方法默认使用逗号将各个元素连接起来，如果想指定连接符号，将该连接符号当参数传入即可。

		var a = [1, 2, 3];
		a.join();		//=> "1,2,3"
		a.join("-");	//=> "1-2-3"

Array.join()方法是String.split() 方法的逆向操作，后者是将字符串分割成若干块来创建一个数组。

##### 2. reverse()

Array.reverse() 方法将数组中的元素颠倒顺序，返回逆序的数组。它不创建新的数组，则是在原先的数组中重新排列元素。

		var a = [1, 2, 3];
		a.reverse().join();		// => "3,2,1"

##### 3. sort()

Array.sort() 方法将数组中的元素排序并返回排序后的数组。当不带参数调用sort()时，数组元素以`字母表`顺序排序，如有必要，则临时转化为字符串进行比较。

		var ss = new Array("aad", "abr", "abn");
		ss.sort();		//["aad", "abn", "abr"]
		ss.reverse();	//["abr", "abn", "aad"]

如果数组包含 underfined 元素，它们会被排列到数组的尾部。

要按照其他方式而非字母表顺序进行排序，则必须传入一个比较函数。该函数决定了它的两个参数在排好序的数组中的先后顺序。

> 假设第一个参数应该在前，比较函数应该返回一个小于0的数值。反之，若第一个参数应该在后，函数应该返回一个大于0的数值。并且，若两个值相等，则返回0。

如：用数值大小进行数组排序，代码如下：

		var a = [33, 4, 1111, 2222];
		a.sort();						//字母表顺序： 1111, 222, 33, 4
		a.sort(function(a, b){
			return a - b;
		})								//数值大小顺序：4, 33, 222, 1111 （从小到大）


若需要对一个字符串数组执行不区分大小写的字母表排序，可在排序前将参数都转化为小写字符串：toLowerCase()。

##### 4. concat()

Array.concat() 方法创建并返回一个新数组。它的元素包括调用concat()的元时数组的元素和concat()的每个参数。如果这些参数中的任何一个自身是数组，则连接的是数组的元素，而非数组本身。

		var a = [1, 2, 3];
		a.concat(4, 5);				// [1, 2, 3, 4, 5]
		a.concat([4, 5]);			// [1, 2, 3, 4, 5]
		a.concat([4, 5], [6, 7]);	// [1, 2, 3, 4, 5, 6, 7]
		a.concat(4, [5, [6, 7]]);	// [1, 2, 3, 4, 5, [6, 7]]

##### 5. slice()

Array.slice() 方法返回指定数组的一个片段或子数组。它的两个参数分别指定了片段的开始和结束的位置。返回的数组包含第一个参数指定的位置和所有到但不含第二个参数指定的位置之间的所有数组元素。如果只指定一个参数，返回的数组将包含从开始位置到数组结尾的所有元素。若参数中出现负数，它表示相对于最后一个元素的位置。如：-1 表示最后一个元素。

###### 注意：slice() 不会修改调用的数组。

		var a = [1, 2, 3, 4, 5];
		a.slice(0, 3);  			//[1,2,3]
		a.slice(3);					//[4,5]
		a.slice(1, -1);				//[2,3,4]

##### 6. splice()

Array.splice() 方法是在数组中插入或删除元素的通用方法。`该方法会修改调用它的数组`。

splice()能够从数组中删除元素、插入元素到数组中或者同事完成这两种操作。在插入或删除点之后的数组元素会根据需要增加或减小它们的索引值，因此数组的其他部分仍然保持连续。

splice()第一个参数指定了插入和（或）删除的起始位置。第二个参数指定了应该从数组中删除的元素的个数。如果省略第二个参数，从起始点开始到数组结尾的所有元素都将被删除。splice()返回一个有删除元素组成的数组，或者如果没有删除元素就返回一个空数组。

		var a = [1, 2, 3, 4, 5, 6, 7,8];
		a.splice(4);	//返回[5, 6, 7, 8]; a = [1, 2, 3, 4]
		a.splice(1,2);	//返回[2,3]; a = [1,4]
		a.splice(1,1);	//返回[4] ; a = [1]

splice() 的前两个参数指定了需要删除的数组元素。紧随其后的任意个数的参数指定了需要插入到数组中的元素，从第一个参数指定的位置开始插入。

		var a = [1, 2, 3, 4, 5];
		a.splice(2, 0, "a", "b") 		//返回[]; a = [1,2,"a","b",3,4,5]
		a.splice(2,2,[1,2],3);			//返回["a", "b"] ; a = [1,2,[1,2],3,3,4,5]

##### 7. push() 和 pop() 

push() 和 pop() 方法允许将数组当做栈来使用。 push()方法在数组的尾部添加一个或多个元素，并返回数组新的长度。pop() 方法则相反：它删除数组的最后一个元素，减少数组长度并返回它删除的值。

###### 注意：这两个方法都是修改并替换原始数组，而非生成一个新的数组。


##### 8. unshift() 和 shift()

unshift() 和 shift() 方法的行为非常类似于 push() 和 pop()，不一样的是前者是在数组的头部而非尾部进行元素的插入和删除操作。

unshift() 在数据的头部添加一个或多个元素，并将已存在的元素移动到更高索引的位置来获得足够的空间，最后返回数组新的长度。

shift() 删除数组的第一个元素并将其返回，然后把所有随后的元素下移一个位置来填补数组头部的空缺。


###### 注意：参数是一次性插入的，而非一次一个地插入。

### ECMAScript 5中的数组方法

##### 1. forEach()

		var data = [1,2,3,4]

		data.forEach(function(v, i, a){
			console.log(a);
		})
		//匿名函数的三个参数分别为：数组元素、元素的索引值和数组本身

##### 2. map()

map() 将调用的数组的每个元素传递给指定的函数，并返回一个数组，它包含该函数的返回值。

		var a = [1,2,3]
		b = a.map(function(x){
			return x * x;			//b = [1, 4, 9]
		})

###### 注意：传递给map()的函数必须有返回值。map()返回的是新数组，它不修改调用的数组。

##### 3. fliter()

fliter() 返回的数组元素是调用的数组的一个子集。传递的函数是用来逻辑判定的：该函数返回true或false。

		var a = [1,2,3,4]
		a.fliter(function(x){
			return x > 3			//[4]
		})

如果想过滤掉数组中的 underfined 和 null ，可以这样使用fliter()：

		a = a.fliter(function(x){
			return x !== underfined && x !== null;
		})

##### 4. every() 和 some()

every() 方法就像数学中的“针对所有”：当且仅当针对数组中的所有元素调用判定函数都返回true，它才返回true。

		a = [1,2,3,4,5]
		a.every(function(x){
			return x < 10;			//true
		})

		a.every(function(x){
			return x % 2 === 0; 	//false
			})


some() 就像数学中的“存在”：当数组中至少有一个元素调用判定函数返回true，它就返回true。且当且仅当数组中的所有元素调用判定函数都返回false，它才返回false。

		a = [1,2,3,4,5]
		a.some(function(x){
			return x % 2 === 0;			//true
			})

		a.some(isNaN)					//false


###### 注意：一旦every() 和 some() 确认该返回什么值，它们就会停止遍历数组元素。

##### 5. indexOf() 和 lastIndexOf()

indexOf() 和 lastIndexOf() 搜索整个数组中具有给定值的元素，返回找到的第一个元素的索引或者如果没有找到就返回-1。

indexOf() 从头至尾搜索，而lastIndexOf() 则反向搜索。

这里不举例。




